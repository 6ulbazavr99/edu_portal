// v.2

// Таблица User - Хранит информацию о пользователях.
Table User {
  id int                      // Уникальный идентификатор пользователя
  app account                 // Приложение, к которому принадлежит пользователь
  username varchar            // Имя пользователя
  grade id [ref: > Grade.id]  // Ссылка на идентификатор класса/уровня обучения пользователя
}

// Таблица Grade - Хранит информацию о классах или уровнях обучения.
Table Grade {
  id int                      // Уникальный идентификатор класса/уровня обучения
  app account                 // Приложение, к которому принадлежит класс/уровень обучения
  title varchar               // Название класса/уровня обучения
  maturity bool               // Статус зрелости или завершенности класса/уровня обучения
}

// Таблица Subject - Хранит информацию о предметах.
Table Subject {
  id int                      // Уникальный идентификатор предмета
  app edu                     // Приложение, к которому принадлежит предмет
  title varchar               // Название предмета
  grades id [ref: > Grade.id] // Ссылка на класс/уровень обучения, к которому относится предмет
  description text            // Описание предмета
}

// Таблица Lesson - Хранит информацию об уроках в рамках предметов.
Table Lesson {
  id int                      // Уникальный идентификатор урока
  app edu                     // Приложение, к которому принадлежит урок
  subject id [ref: < Subject.id] // Ссылка на идентификатор предмета
  topic varchar               // Тема урока
  description text            // Описание урока
}

// Таблица Test - Хранит информацию о тестах, связанных с уроками.
Table Test {
  id int                      // Уникальный идентификатор теста
  app edu                     // Приложение, к которому принадлежит тест
  lesson id [ref: < Lesson.id] // Ссылка на идентификатор урока
  questions text              // Текст вопросов теста
  correct_answers list        // Список ответов
}

// Таблица UserSubject - Связывает пользователей с предметами и отслеживает их прогресс.
Table UserSubject {
  id int                      // Уникальный идентификатор записи
  app self_edu                // Приложение, к которому принадлежит запись
  user int [ref: > User.id]   // Ссылка на идентификатор пользователя
  subject int [ref: > Subject.id] // Ссылка на идентификатор предмета
  progress percent [default: 0] // Прогресс пользователя по предмету
  status bool [default: False] // Статус завершенности предмета пользователем
  subjects list  // Предметы выбранные пользователем при регистрации
}

// Таблица UserLesson - Связывает пользователей с уроками и отслеживает их прогресс.
Table UserLesson {
  id int                      // Уникальный идентификатор записи
  app self_edu                // Приложение, к которому принадлежит запись
  user int [ref: > User.id]   // Ссылка на идентификатор пользователя
  lesson id [ref: > Lesson.id] // Ссылка на идентификатор урока
  progress percent [default: 0] // Прогресс пользователя по уроку
  status bool [default: False] // Статус завершенности урока пользователем
}

// Таблица UserTest - Связывает пользователей с тестами и отслеживает их результаты.
Table UserTest {
  id int                      // Уникальный идентификатор записи
  app self_edu                // Приложение, к которому принадлежит запись
  user int [ref: > User.id]   // Ссылка на идентификатор пользователя
  test id [ref: > Test.id] // Ссылка на идентификатор теста
  user_answers list           // Список ответов пользователя
  status bool [default: False] // Статус завершенности теста пользователем
}
